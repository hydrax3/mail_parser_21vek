# Инструкция: Как запустить бота через GitHub Actions

Это подробная инструкция по настройке автоматического запуска вашего бота (скрипта `parser.py`) каждые 30 минут с использованием GitHub Actions.

## Шаг 1. Создайте репозиторий на GitHub

1.  Зайдите на [github.com](https://github.com) и войдите в свой аккаунт.
2.  Нажмите кнопку **New** (или `+` в правом верхнем углу).
3.  **Repository name**: Назовите его, например, `yandex-mail-parser`.
4.  **Visibility**: Выберите **Private** (ОБЯЗАТЕЛЬНО, так как в коде есть почтовые настройки и ключи).
5.  Нажмите **Create repository**.

## Шаг 2. Загрузите код в репозиторий

Откройте терминал (командную строку) в папке с проектом (`f:\ai_work\оптимизация_операторов\parser_yandexmail`) и выполните команды по очереди:

```bash
# Инициализация git (если еще не сделано)
git init

# Добавление всех файлов
git add .
# Примечание: файл .env в гит не попадет (он в .gitignore), ключи будут браться из Secrets

# Создание первого коммита
git commit -m "Initial commit"

# Связывание с удаленным репозиторием (замените YOUR_USERNAME на ваш никнейм)
git branch -M main
git remote add origin https://github.com/YOUR_USERNAME/yandex-mail-parser.git

# Отправка кода
git push -u origin main
```

> **Важно:** При `git push` вас могут попросить ввести логин/пароль. В качестве пароля используйте **Personal Access Token** (получается в `Settings -> Developer settings -> Personal access tokens`), а не пароль от аккаунта.

## Шаг 3. Настройка "Секретов" (Secrets)

Чтобы бот работал и имел доступ к почте и Google Таблицам, нужно добавить конфиденциальные данные в настройки репозитория.

1.  В вашем репозитории на GitHub перейдите во вкладку **Settings**.
2.  В меню слева выберите **Secrets and variables** -> **Actions**.
3.  Нажмите зеленую кнопку **New repository secret**.
4.  Добавьте следующие переменные (по одной):

| Name (Имя) | Secret (Значение) |
| :--- | :--- |
| **YANDEX_EMAIL** | Адрес почты бота (например, `bot_sa@21vek.tech`) |
| **YANDEX_PASSWORD** | Пароль приложения от почты (тот, что в вашем `.env` сейчас) |
| **GOOGLE_SHEET_URL** | Ссылка на вашу Google таблицу |
| **GCP_CREDENTIALS_JSON** | Откройте файл `credentials.json` в блокноте, скопируйте **ВСЁ содержимое** и вставьте сюда. |

## Шаг 4. Проверка работы

1.  Перейдите во вкладку **Actions** в репозитории.
2.  Вы увидите рабочий процесс (Workflow) с именем **Run Email Parser** (или "Initial commit", если он запустился автоматически).
3.  Если он не запустился сам:
    - Выберите сбоку **Run Email Parser**.
    - Нажмите кнопку **Run workflow** -> **Run workflow**.
4.  Нажмите на запущенный процесс, чтобы увидеть логи.
5.  Дождитесь зеленых галочек.

Теперь бот будет автоматически запускаться каждые 30 минут.

---

### Как остановить бота?
Если нужно остановить: `Settings` -> `Actions` -> `Disable workflow`.
